(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[84973],{437896:function(e,t,i){"use strict";i.d(t,{R:function(){return g}});var r=i(4799),n=i(312253),o=i(14517),s=i(285154),l=i(906076),a=i(876298),c=i(258998),d=i(542071),u=i.n(d);let p=n.createContext({}),g=()=>n.useContext(p);t.Z=n.forwardRef(function(e,t){let{title:i,titleDisabled:d,titleSuffix:g,subtitle:h,children:m,active:x=!0,as:v,className:f,disableScrolling:y,...j}=e,_=n.useRef(null);return n.useEffect(()=>{x&&!y&&_.current&&setTimeout(()=>{var e;null===(e=_.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},500)},[x,y]),(0,r.jsx)(p.Provider,{value:{active:x},children:(0,r.jsx)(a.Z,{Component:v||"article",border:!0,className:(0,o.W)(u().root,{[u().active]:x},f),...j,children:(0,r.jsxs)("div",{className:u().card,ref:(0,s.Z)([_,t]),title:x?void 0:d,children:[(0,r.jsxs)(l.K,{align:"center",direction:"row",justify:"space-between",children:[(0,r.jsx)(c.ZP,{h3:!0,noMargin:!0,style:{...!x&&{color:"var(--accents-3)"}},children:i}),g||null]}),(0,r.jsx)("hr",{className:"geist-hr-reset",style:{marginTop:"var(--geist-space-4x)"}}),h?(0,r.jsx)(c.ZP,{Component:"div",h6:!0,noMargin:!0,style:{color:x?"var(--accents-6)":"var(--accents-3)",margin:"var(--geist-gap) 0"},weight:400,children:h}):null,m]})})})})},359588:function(e,t,i){"use strict";i.d(t,{XO:function(){return s},hK:function(){return o},lS:function(){return a}});var r=i(312253);let n={status:"creating-repo",cloneRepoStatus:"not-started",creatingTeamCollapsed:!1,creatingTeamSkipped:!1,projectId:null,projectName:"",clonedRepo:{id:null,slug:null},repo:{namespace:"",name:"",ownerType:"",gitType:""},deploymentId:null},o=r.createContext({}),s=()=>r.useContext(o);function l(e,t){switch(t.type){case"SET_STATUS":return{...e,status:t.status};case"SET_CREATING_REPO_WITH_TEAM":return{...e,status:"creating-repo-with-team",createdTeamId:t.teamId};case"SET_CLONE_REPO_STATUS":return{...e,cloneRepoStatus:t.cloneRepoStatus};case"SET_TARGET_NAMESPACE":return{...e,repo:{...e.repo,namespace:t.namespace,ownerType:t.ownerType}};case"SET_TARGET_REPO":return{...e,repo:{...e.repo,name:t.name}};case"SET_GIT_TYPE":return{...e,repo:{...e.repo,gitType:t.gitType}};case"SET_PROJECT_ID":return{...e,projectId:t.projectId};case"SET_PROJECT_NAME":return{...e,projectName:t.projectName};case"SET_CLONED_REPO":return{...e,clonedRepo:{id:t.data.id,slug:t.data.slug}};case"SET_DEPLOYMENT_ID":return{...e,deploymentId:t.deploymentId};case"SET_CREATE_TEAM_COLLAPSED":return{...e,creatingTeamCollapsed:t.creatingTeamCollapsed};case"SET_CREATE_TEAM_SKIPPED":return{...e,creatingTeamSkipped:t.creatingTeamSkipped};case"RESET":return n;default:return e}}function a(){return r.useReducer(l,n)}},832644:function(e,t,i){"use strict";i.d(t,{A:function(){return p},V:function(){return u}});var r=i(4799),n=i(312253),o=i(779810),s=i(561355),l=i(835868),a=i(910534),c=i(586348),d=i.n(c);function u(e){let{projects:t,error:i,gitType:n}=e,l=((null==t?void 0:t.length)??0)>1?11:24;return i?(0,r.jsx)("div",{className:d().frameworkIconGroup,children:(0,r.jsx)(s.Z,{gitType:n,height:24,width:24})}):t?(0,r.jsx)("div",{className:d().frameworkIconGroup,children:t.length<5?t.map(e=>e.framework.logo?(0,r.jsx)(p,{framework:e.framework,size:l},e.name):null):(0,r.jsx)("div",{className:d().numProjects,children:t.length<9?t.length:"9+"})}):(0,r.jsx)("div",{className:d().frameworkIconGroup,children:(0,r.jsx)(o.O,{height:24,rounded:!0,width:24})})}let p=(0,n.memo)(function(e){let{framework:t,size:i,style:n,className:o}=e,s=(0,l.EE)({logo:t.logo,darkModeLogo:t.darkModeLogo});return(0,r.jsx)(a.qE,{className:o,size:i,style:n,title:t.name,url:s})})},73745:function(e,t,i){"use strict";i.d(t,{L:function(){return _},s:function(){return T}});var r=i(4799),n=i(312253),o=i(76661),s=i(323373),l=i(779810),a=i(20135),c=i(954898),d=i(794845),u=i(231655),p=i(681021),g=i(561355),h=i(628497),m=i(234048),x=i(118214),v=i(437896),f=i(773361),y=i(55910),j=i(359588);function _(e){let{gitType:t,namespace:i,repo:_,template:E,disabled:S,dispatch:b,error:A,setRepoNameStates:w,loading:C}=e,{data:P,mutate:N,isLoading:I}=(0,x.ZP)({provider:t}),{dispatch:Z}=(0,j.XO)(),{active:G}=(0,v.R)(),{user:R,isLoading:L}=(0,m.a)(),{team:M,isReady:k}=(0,h.t7)(),O=L||!k||I;n.useEffect(()=>{if(E&&t){let e=_??E;Z({type:"SET_TARGET_REPO",name:e}),w(r=>({...r,[t]:[i,e]}))}},[E,b,Z,t,i,w,_]);let B=n.useCallback(e=>{let{value:r}=e.currentTarget;b({type:"SET_REPO",gitType:t,namespace:i,repo:r}),Z({type:"SET_TARGET_REPO",name:r})},[b,Z,t,i]),D=n.useCallback(async e=>{let i=await N(),r=Array.isArray(i)&&i.length>0&&i.find(t=>t.installationId===e)||null;b({type:"SET_REPO",gitType:t,namespace:null==r?void 0:r.name,repo:_}),r&&Z({type:"SET_TARGET_NAMESPACE",namespace:r.slug,ownerType:r.ownerType})},[b,Z,t,N,_]),{open:U}=(0,f.Z)({onSuccess:(0,y._)(D)}),[z,H]=n.useState(!1);T(t,P,z,!I&&P,H,U);let W=n.useCallback(e=>{if("select-different-git-provider"===e)b({type:"SET_REPO",gitType:t,namespace:void 0,repo:null}),b({type:"SET_GIT_TYPE",gitType:void 0}),Z({type:"SET_TARGET_NAMESPACE",namespace:"",ownerType:""}),Z({type:"SET_TARGET_REPO",name:""}),Z({type:"SET_GIT_TYPE",gitType:""});else if("install-github"===e)H(!0),U();else if("string"==typeof e){let i="",r=null==P?void 0:P.find(t=>{let{slug:i}=t;return i===e});r&&(i=r.ownerType),b({type:"SET_REPO",gitType:t,namespace:e,repo:_,ownerType:i}),Z({type:"SET_TARGET_NAMESPACE",namespace:e,ownerType:i})}},[b,Z,t,U,_,P]),F=P&&[...P.map(e=>({value:e.slug||"",label:e.name||"",prefix:(0,r.jsx)(g.Z,{gitType:t}),isMenu:!1})),..."github"===t?[{value:"install-github",label:"Add GitHub Account",prefix:(0,r.jsx)(o.v,{size:14}),isMenu:!0}]:[],{value:"select-different-git-provider",label:"Switch Git Provider",prefix:(0,r.jsx)(s.a,{size:14}),isMenu:!0}];return n.useEffect(()=>{!i&&P&&P.length>0&&(b({type:"SET_REPO",gitType:t,namespace:P[0].slug,repo:_,ownerType:P[0].ownerType}),Z({type:"SET_TARGET_NAMESPACE",namespace:P[0].slug,ownerType:P[0].ownerType}))},[b,Z,t,i,_,P]),n.useEffect(()=>{let e=E||"",i=null==P?void 0:P.find(e=>{var t;return null==R?void 0:null===(t=R.preferredScopesAndGitNamespaces)||void 0===t?void 0:t.find(t=>t.scopeId===((null==M?void 0:M.id)||R.uid)&&String(e.id)===String(t.gitNamespaceId))}),r=i??(null==P?void 0:P.find(e=>e.id===parseInt((null==R?void 0:R.importFlowGitNamespaceId)??"")))??(null==P?void 0:P[0]);r&&t&&(Z({type:"SET_TARGET_NAMESPACE",namespace:r.slug,ownerType:r.ownerType}),w(i=>({...i,[t]:[r.slug,e]})))},[R,P,Z,t,w,M,E]),(0,r.jsxs)(d.Z,{direction:["column","row","row"],gap:0,inline:!0,noWrap:!0,style:{width:"100%"},children:[(0,r.jsx)(d.Z,{flex:"45%",children:(0,r.jsx)(c.Z,{id:"git-scope-select",value:"Git Scope",withInput:!0,children:O?(0,r.jsx)(l.O,{height:40,width:"100%"}):(0,r.jsxs)(u.Z,{className:"select-git-scope",clearable:!1,disabled:C||S||!Array.isArray(P)&&G,onChange:W,placeholder:"Select Git Scope",value:i,children:[(0,r.jsx)(u.Z.Input,{loading:(null==P?void 0:P.length)===0}),(0,r.jsx)(u.Z.List,{children:null==F?void 0:F.map(e=>(0,r.jsx)(u.Z.Option,{isMenu:e.isMenu,prefix:e.prefix,value:e.value,children:e.label},e.value))})]})})}),(0,r.jsx)(p.L,{x:1/3,y:2/3}),(0,r.jsx)(d.Z,{flex:"60%",children:(0,r.jsx)(c.Z,{id:"repo-name",value:"Repository Name",withInput:!0,children:O?(0,r.jsx)(l.O,{height:40,width:"100%"}):(0,r.jsx)(a.I,{autoCapitalize:"off",autoComplete:"off",autoCorrect:"off",className:"repository-name",disabled:C||S||!Array.isArray(P)&&G,error:A,id:"repo-name",maxLength:100,onChange:B,placeholder:"my-repository",spellCheck:!1,value:_||"",width:"100%"})})})]})}function T(e,t,i,r,o,s){n.useEffect(()=>{"github"!==e||(null==t?void 0:t.length)||i||!r||(o(!0),s())},[e,t,s,i,r,o])}},925407:function(e,t,i){"use strict";i.d(t,{j:function(){return $},x:function(){return Y}});var r=i(4799),n=i(312253),o=i(14517),s=i(76661),l=i(323373),a=i(200494),c=i(779810),d=i(258998),u=i(838262),p=i(681021),g=i(231655),h=i(794845),m=i(98820),x=i(561355),v=i(929068),f=i(45133),y=i(843987),j=i(220395),_=i(293153),T=i(52954),E=i(451173),S=i(773361),b=i(801352),A=i(234048),w=i(843255),C=i(118214),P=i(628497),N=i(747151),I=i(73745),Z=i(440077),G=i.n(Z),R=i(460442),L=i(906076),M=i(762578),k=i(808885),O=i(966589),B=i(832644);function D(e){let{repo:t,gitType:i,search:s,renderButton:l,repoSkeletonWidthPercentage:d=100,currentNamespace:u}=e,{data:p,error:g,isLoading:h}=(0,O.t)(null==t?void 0:t.url),m=(0,k.R)(null==t?void 0:t.updatedAt),x=(0,n.useMemo)(()=>t?s?t.name.split(s).reduce((e,t,i)=>(0!==i&&e.push((0,r.jsx)("mark",{className:G().suggestionHighlight,children:s},e.length)),t&&e.push((0,r.jsx)("span",{children:t},e.length)),e),[]):[(0,r.jsx)("span",{children:t.name})]:null,[t,s]),{team:v}=(0,P.t7)(),f=v?`${v.slug}/`:"",y=(0,n.useMemo)(()=>l(t,i,f,u,null==p?void 0:p.projects[0],null==p?void 0:p.projects.length),[t,i,f,p]);return(0,r.jsx)(M.JH,{actions:(0,r.jsx)(L.K,{direction:"row",children:y}),"data-testid":(0,j.C)("import-flow-layout","suggestion-card","suggestion"),placeholder:!t||h,thumbnail:(0,r.jsx)(M.bL,{size:24,children:h?(0,r.jsx)(a.$,{size:24}):(0,r.jsx)(B.V,{error:g,gitType:i,projects:null==p?void 0:p.projects})}),children:(0,r.jsx)(M.Sn,{children:t?(0,r.jsxs)(L.K,{align:"center",className:G().entityStack,direction:"row",gap:1,children:[(0,r.jsx)(L.K,{className:G().entityName,flex:"0 1 auto",children:(0,r.jsx)("span",{className:(0,o.W)(G().repoTitle,"geist-ellipsis"),title:t.name,children:x})}),(null==t?void 0:t.private)?(0,r.jsx)(L.K,{as:"span",flex:"0 0 auto",title:"Private Git Repository",vcenter:!0,children:(0,r.jsx)(R.H,{color:"var(--accents-5)",size:14})}):null,(0,r.jsx)(L.K,{className:"geist-hide-on-mobile",flex:"0 0 auto",children:(0,r.jsx)("span",{className:G().repoDescription,children:"\xb7"})}),(0,r.jsx)(L.K,{className:"geist-hide-on-mobile",flex:"0 0 auto",children:(0,r.jsx)("span",{className:G().repoDescription,children:m})})]}):(0,r.jsx)(c.O,{height:20,width:`${d}%`})})})}function U(e){let{"data-testid":t,gitType:i,dispatch:o,shouldUpdatePreferredGitAccount:s,size:l}=e,[a,d]=(0,n.useState)(!1),{user:u}=(0,A.a)(),{account:p,mutate:g}=(0,w.Z)(u??null),h=(0,n.useCallback)(async()=>{d(!0);let e=await (0,C.Iw)(i);d(!1);let t=Array.isArray(e)&&e.length>0?e[0].id:void 0;o({type:"SET_GIT_ACCOUNT",gitAccount:{provider:i,namespaceId:t}}),s&&Y({provider:i,namespaceId:t})},[o,i,s]),m=(0,E.Z)({onOpen:()=>{d(!0)},onAbort:()=>{d(!1)},onSuccess:()=>{h(),g(),d(!1)}});return(0,r.jsx)(c.O,{show:!p,children:(0,r.jsxs)(v.Z,{align:"grow","data-testid":t,gitType:i,loading:a,onClick:()=>{var e;p&&((null===(e=p[i])||void 0===e?void 0:e.verified)?h():m.open(i))},size:l,width:"100%",children:[(0,r.jsx)("span",{className:G().continueWithText,children:"Continue with"})," ",(0,_.F)(i)]})})}function z(e){let{search:t,gitAccount:i,configureGithubInstallation:s}=e,l=null==i?void 0:i.provider,{data:a}=(0,C.ZP)({provider:l}),c=(0,n.useMemo)(()=>{var e;return i&&a?null===(e=a.find(e=>e.id===(null==i?void 0:i.namespaceId)))||void 0===e?void 0:e.name:null},[a,i]);return(0,r.jsx)(h.Z,{center:!0,className:(0,o.W)(G().selectProvider,G().emptyResult),children:(0,r.jsxs)(h.Z,{flex:"0 0 auto",gap:0,children:[(0,r.jsxs)(d.ZP,{center:!0,"data-testid":(0,j.C)("import-flow-layout","no-results-found-text"),noMargin:!0,preset:"body-2",weight:500,children:["No ",t?"Results":"Git Repositories"," Found"]}),(0,r.jsx)(p.L,{y:.25}),t?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(d.ZP,{center:!0,noMargin:!0,preset:"body-2",style:{color:"var(--accents-6)",wordBreak:"break-word"},children:(0,r.jsxs)(h.Z,{center:!0,inline:!0,row:!0,children:["Your search ",t?`for "${t}"`:null," ",i&&c?(0,r.jsxs)(r.Fragment,{children:["in"," ",(0,r.jsxs)(h.Z,{center:!0,flex:"0 0 auto",inline:!0,noWrap:!0,row:!0,children:[(0,r.jsx)(p.L,{x:.2}),(0,r.jsx)(h.Z,{flex:"0 0 auto",children:(0,r.jsx)(x.Z,{gitType:i.provider})}),(0,r.jsx)(p.L,{x:.2}),(0,r.jsx)(d.ZP,{className:"geist-ellipsis",span:!0,weight:500,children:c}),(0,r.jsx)(p.L,{x:.2})]})]}):null," ","did not return any results."]})}),(0,r.jsx)(p.L,{y:.25})]}):null,s?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(d.ZP,{center:!0,noMargin:!0,preset:"body-2",style:{color:"var(--accents-6)"},children:"Make sure to grant Vercel access to the Git repositories you’d like to import."}),(0,r.jsx)(p.L,{y:1}),(0,r.jsx)(v.Z,{"data-testid":(0,j.C)("import-flow-layout","configure-github-app-button"),gitType:"github",loading:!1,onClick:s,children:"Configure GitHub App"})]}):(0,r.jsx)(d.ZP,{center:!0,noMargin:!0,preset:"body-2",style:{color:"var(--accents-6)"},children:"Try selecting a different Git account or organization on the top left."})]})})}function H(){return(0,r.jsx)(h.Z,{center:!0,className:(0,o.W)(G().selectProvider,G().emptyResult),children:(0,r.jsxs)(h.Z,{flex:"0 0 auto",gap:0,children:[(0,r.jsx)(d.ZP,{center:!0,"data-testid":(0,j.C)("import-flow-layout","almost-done"),noMargin:!0,preset:"body-2",weight:500,children:"You're Almost There"}),(0,r.jsx)(p.L,{y:.25}),(0,r.jsx)(d.ZP,{center:!0,noMargin:!0,preset:"body-2",style:{color:"var(--accents-6)"},children:"Select a GitHub account or organization on the top left to see your Git repositories."})]})})}function W(){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(p.L,{y:.5}),(0,r.jsxs)(h.Z,{center:!0,className:G().loadingResult,halfGap:!0,row:!0,children:[(0,r.jsx)(p.L,{expand:!0}),(0,r.jsx)(h.Z,{flex:"0 0 auto",children:(0,r.jsx)(a.$,{})}),(0,r.jsx)(h.Z,{flex:"0 0 auto",children:(0,r.jsx)(d.ZP,{center:!0,preset:"body-2",style:{color:"var(--accents-5)"},children:"Loading results..."})}),(0,r.jsx)(p.L,{expand:!0})]})]})}function F(e){let{repos:t,revalidateRepos:i,search:a,debouncedSearch:v,gitAccount:f,dispatch:y,renderButton:_,shouldUpdatePreferredGitAccount:T,small:E,onChangeGitSelector:b}=e,A=null==f?void 0:f.provider,{data:w,mutate:Z,isLoading:R}=(0,C.ZP)({provider:A}),[L,M]=(0,n.useState)(!1),{team:k}=(0,P.t7)(),{can:O,isLoading:B}=(0,N.ZP)(),U=O(N.aU.Create,N._z.Project),F=!B&&!U,K=(0,n.useCallback)(async e=>{var t;let{installationId:r}=e,n=await Z(),o=Array.isArray(n)&&n.length>0&&((null===(t=n.find(e=>e.installationId===r))||void 0===t?void 0:t.id)||n[0].id)||null;y({type:"SET_GIT_NAMESPACE",namespaceId:o}),T&&Y({provider:"github",namespaceId:o}),M(!0),await i(),M(!1)},[i,y,Z,T]),{open:V}=(0,S.Z)({onSuccess:K}),[$,J]=(0,n.useState)(!1),X=(0,n.useMemo)(()=>{if("github"===A&&(null==w?void 0:w.length)){let e=w.find(e=>Number(e.id)===Number(null==f?void 0:f.namespaceId));if(null==e?void 0:e.isAccessRestricted)return V}},[A,V,w,f]),q=(null==f?void 0:f.provider)==="github"&&!f.namespaceId;(0,I.s)(A,w,$,!R,J,V);let Q=(0,n.useMemo)(()=>{if(F)return{ui:(0,r.jsx)(c.O,{height:"100%",width:"100%"})};if(a!==v)return{ui:(0,r.jsx)(W,{}),suggestionListBorder:!0};if(!t||!w||L)return null===a?{ui:[,,,,,].fill(1).map((e,t)=>(0,r.jsx)(D,{renderButton:_,repoSkeletonWidthPercentage:60+Math.floor(30*Math.sin(56130*t+153))},t)),suggestionListBorder:!1}:{ui:(0,r.jsx)(W,{}),suggestionListBorder:!0};if(q)return{ui:(0,r.jsx)(H,{}),suggestionListBorder:!1};if(0===t.length)return null===a?{ui:(0,r.jsx)(z,{configureGithubInstallation:X,gitAccount:f}),suggestionListBorder:!1}:{ui:(0,r.jsx)(z,{configureGithubInstallation:X,gitAccount:f,search:v}),suggestionListBorder:!1};let e=!1;(null==f?void 0:f.provider)==="github"?e=t.length<5&&!!X:((null==f?void 0:f.provider)==="gitlab"||(null==f?void 0:f.provider)==="bitbucket")&&(e=t.length<5);let i=w.find(e=>String(e.id)===String(null==f?void 0:f.namespaceId));return{ui:(0,r.jsxs)(r.Fragment,{children:[t.slice(0,5).map(e=>(0,r.jsx)(D,{currentNamespace:i,gitType:null==f?void 0:f.provider,renderButton:_,repo:e,search:v},e.id)),e?(0,r.jsxs)(d.ZP,{preset:"body-2",style:{color:"var(--accents-6)",textAlign:"left"},children:["Missing Git repository?"," ",(null==f?void 0:f.provider)==="github"?(0,r.jsx)(u.r,{href:"",onClick:X,variant:"highlight",children:"Adjust GitHub App Permissions →"}):(0,r.jsx)(u.r,{external:!0,href:`/docs/concepts/deployments/git/vercel-for-${null==f?void 0:f.provider}#missing-git-repository`,variant:"highlight",children:"Learn More"})]}):null]}),suggestionListBorder:t.length<5}},[F,a,v,t,w,L,q,f,X,_]),ee=(0,n.useCallback)(e=>{console.log("SET_GIT_NAMESPACE",e),"select-different-git-provider"===e?(y({type:"SET_GIT_ACCOUNT",gitAccount:null}),T&&Y({provider:null,namespaceId:null})):"install-github"===e?(J(!0),V()):(y({type:"SET_GIT_NAMESPACE",namespaceId:e}),T&&Y({namespaceId:e})),null==b||b()},[y,V,T,b]),et=w&&[...w.map(e=>({"data-testid":(0,j.C)("git-scope-combobox",`namespace-${e.provider}`),value:String(e.id),label:e.name||"",prefix:(0,r.jsx)(x.Z,{gitType:A}),isMenu:!1})),..."github"===A?[{"data-testid":(0,j.C)("import-flow-layout","git-scope-combobox","add-github-account"),value:"install-github",label:"Add GitHub Account",prefix:(0,r.jsx)(s.v,{size:14}),isMenu:!0}]:[],{"data-testid":(0,j.C)("import-flow-layout","git-scope-combobox","switch-git-provider"),value:"select-different-git-provider",label:"Switch Git Provider",prefix:(0,r.jsx)(l.a,{size:14}),isMenu:!0}],ei=null==w?void 0:w.find(e=>String(e.id)===String(null==f?void 0:f.namespaceId));return(0,n.useEffect)(()=>{let e=null==w?void 0:w.find(e=>String(e.id)===String(null==f?void 0:f.namespaceId));!e&&(null==w?void 0:w.length)&&y({type:"SET_GIT_NAMESPACE",namespaceId:w[0].id})},[y,f,w]),(0,r.jsxs)(h.Z,{className:(0,o.W)(G().suggestionList,{[G().suggestionListBorder]:!E&&Q.suggestionListBorder}),gap:!1,children:[(0,r.jsx)(h.Z,{flex:"0 0 auto",children:(0,r.jsxs)(h.Z,{className:G().suggestionDescription,direction:["column","row","row"],gap:!1,inline:!0,noWrap:!0,children:[(0,r.jsx)(h.Z,{flex:"50%",children:(0,r.jsx)(c.O,{show:void 0===f||!Array.isArray(w)||F,children:(0,r.jsxs)(g.Z,{clearable:!1,"data-git-namespace-combobox":!0,"data-testid":(0,j.C)("import-flow-layout","git-scope-combobox"),onChange:ee,placeholder:"Select a Git Namespace",value:(null==f?void 0:f.namespaceId)?String(f.namespaceId):null,children:[(0,r.jsx)(g.Z.Input,{"data-git-namespace-combobox-input":!0,"data-testid":(0,j.C)("import-flow-layout","git-scope-combobox","input"),loading:"github"===A&&(null==w?void 0:w.length)===0}),(0,r.jsx)(g.Z.List,{children:null==et?void 0:et.map(e=>(0,r.jsx)(g.Z.Option,{"data-testid":e["data-testid"],isMenu:e.isMenu,prefix:e.prefix,value:e.value,children:e.label},e.value))})]})})}),(0,r.jsx)(p.L,{x:1/3,y:1/3}),(0,r.jsx)(h.Z,{flex:"50%",children:(0,r.jsx)(c.O,{show:F||!((null==ei?void 0:ei.ownerType)==="team"&&!k)&&(!!(!t&&null===a&&!q)||!Array.isArray(w)||L),children:(0,r.jsx)(m.Z,{"data-testid":(0,j.C)("import-flow-layout","search-input"),disabled:!!((null==t?void 0:t.length)===0&&null===a),onChange:e=>y({type:"SET_SEARCH",search:e.target.value}),placeholder:"Search...",value:a??"",width:"100%"})})})]})}),(0,r.jsx)(p.L,{y:2/3}),(0,r.jsx)(h.Z,{flex:"1 0 auto",children:(0,r.jsx)(h.Z,{className:G().repoList,"data-testid":(0,j.C)("import-flow-layout","repository-list"),gap:!1,children:Q.ui})})]})}function K(e){let{dispatch:t,small:i,shouldUpdatePreferredGitAccount:s}=e;return i?(0,r.jsxs)("div",{className:(0,o.W)(G().selectProvider,G().small),children:[["github","gitlab","bitbucket"].map(e=>(0,r.jsxs)(n.Fragment,{children:[(0,r.jsx)("span",{className:G().providerBtn,children:(0,r.jsx)(U,{"data-testid":(0,j.C)("select-git-repository","choose-provider",e),dispatch:t,gitType:e,shouldUpdatePreferredGitAccount:s})}),(0,r.jsx)("span",{className:(0,o.W)(G().providerBtn,G().providerBtnMobile),children:(0,r.jsx)(U,{"data-testid":(0,j.C)("select-git-repository","choose-provider",e),dispatch:t,gitType:e,shouldUpdatePreferredGitAccount:s,size:"small"})}),(0,r.jsx)(p.L,{x:.5,y:.25})]},e)),(0,r.jsx)(p.L,{expand:!0,y:.5}),(0,r.jsx)(d.ZP,{span:!0,type:"success",weight:500,children:(0,r.jsx)(u.r,{external:!0,href:"/account/login-connections",variant:"highlight",children:"Manage Login Connections"})})]}):(0,r.jsx)(h.Z,{center:!0,className:G().selectProvider,children:(0,r.jsxs)(h.Z,{center:!0,flex:"0 0 auto",children:[(0,r.jsx)(d.ZP,{center:!0,preset:"body-2",style:{color:"var(--accents-6)"},children:"Select a Git provider to import an existing project from a Git Repository."}),(0,r.jsx)(p.L,{}),(0,r.jsx)(h.Z,{direction:"column",gap:1/3,style:{width:320},children:["github","gitlab","bitbucket"].map(e=>(0,r.jsx)(h.Z,{children:(0,r.jsx)(U,{"data-testid":(0,j.C)("select-git-repository","choose-provider",e),dispatch:t,gitType:e,shouldUpdatePreferredGitAccount:s})},e))}),(0,r.jsx)(p.L,{}),(0,r.jsx)(d.ZP,{center:!0,preset:"body-2",type:"success",weight:500,children:(0,r.jsx)(u.r,{external:!0,href:"/account/login-connections",children:"Manage Login Connections"})})]})})}function V(e,t){switch(t.type){case"INIT_GIT_ACCOUNT":return{...e,preferredGitAccount:t.preferredGitAccount};case"SET_SEARCH":return{...e,search:t.search};case"SET_DEBOUNCED_SEARCH":return{...e,debouncedSearch:t.debouncedSearch,ts:e.debouncedSearch!==e.search?Date.now():e.ts};case"SET_GIT_ACCOUNT":return{...e,search:null,localGitAccount:t.gitAccount};case"SET_GIT_NAMESPACE":let i=e.localGitAccount??e.preferredGitAccount;return i?{...e,localGitAccount:{...i,namespaceId:t.namespaceId}}:e;default:return e}}let Y=async e=>{let{namespaceId:t,provider:i}=e;await (0,T.I)(y.zh,{method:"PATCH",body:JSON.stringify({importFlowGitNamespaceId:t,importFlowGitProvider:i})})};function $(e){var t,i,s;let{renderButton:l,small:a,shouldUpdatePreferredGitAccount:c,onChangeGitSelector:d}=e,{user:u}=(0,A.a)(),{account:p,isLoading:g}=(0,w.Z)(u),[{search:h,debouncedSearch:m,localGitAccount:x,preferredGitAccount:v,ts:y},j]=(0,n.useReducer)(V,{search:null,debouncedSearch:null,ts:Date.now()});(0,n.useEffect)(()=>{let e=setTimeout(()=>j({type:"SET_DEBOUNCED_SEARCH",debouncedSearch:h}),300);return()=>clearTimeout(e)},[h]);let{data:_,mutate:T}=(0,b.Z)({query:m,provider:null==x?void 0:x.provider,namespaceId:null==x?void 0:x.namespaceId,s:y});(0,n.useEffect)(()=>{_&&"error"in _&&"installation_not_found"===_.error.code?(j({type:"SET_GIT_NAMESPACE",namespaceId:null}),c&&Y({namespaceId:null})):_&&c&&j({type:"INIT_GIT_ACCOUNT",preferredGitAccount:"error"in _?null:_.gitAccount})},[_,c]);let E=(0,n.useMemo)(()=>{var e,t,i;let n=void 0!==x?x:v,o=(null==p?void 0:null===(e=p.github)||void 0===e?void 0:e.verified)??!1,s=(null==p?void 0:null===(t=p.gitlab)||void 0===t?void 0:t.verified)??!1,y=(null==p?void 0:null===(i=p.bitbucket)||void 0===i?void 0:i.verified)??!1;return c&&void 0===v||g||(o||s||y)&&n?(0,r.jsx)(F,{debouncedSearch:m,dispatch:j,gitAccount:n,onChangeGitSelector:d,renderButton:l,repos:_&&"repos"in _?_.repos:void 0,revalidateRepos:T,search:h,shouldUpdatePreferredGitAccount:c,small:a}):(null==u?void 0:u.limited)?(0,r.jsx)(f.Z,{small:a}):(0,r.jsx)(K,{dispatch:j,shouldUpdatePreferredGitAccount:!0,small:a})},[x,v,c,null==p?void 0:null===(t=p.github)||void 0===t?void 0:t.verified,null==p?void 0:null===(i=p.gitlab)||void 0===i?void 0:i.verified,null==p?void 0:null===(s=p.bitbucket)||void 0===s?void 0:s.verified,g,null==u?void 0:u.limited,a,m,d,l,_,T,h]);return(0,r.jsx)("div",{className:(0,o.W)(G().suggestionBox,{[G().small]:a}),children:E})}},835868:function(e,t,i){"use strict";i.d(t,{EE:function(){return s},ok:function(){return o}});var r=i(312253),n=i(747435);function o(){let e=(0,n.Z)(),[t,i]=(0,r.useState)(!1);return(0,r.useEffect)(()=>i(!0),[]),{loading:!t,resolvedTheme:e?"light":"dark"}}function s(e){let{loading:t,resolvedTheme:i}=o();return t?e.logo:"dark"===i&&e.darkModeLogo?e.darkModeLogo:e.logo}},157966:function(e,t,i){"use strict";i.d(t,{e:function(){return n},j:function(){return o}});var r=i(187968);function n(e){return e&&r.aU[e]?r.Sg[r.aU[e]]:e&&r.Sg[e]?r.Sg[e]:null}function o(e){let t;if("string"!=typeof e)return null;try{t=JSON.parse(decodeURIComponent(e))}catch(e){return null}return t.message=n(t.code)||"Unknown error.",t}},55910:function(e,t,i){"use strict";i.d(t,{_:function(){return l}});var r,n=i(151854);let o=(e,t)=>function(){for(var i=arguments.length,r=Array(i),o=0;o<i;o++)r[o]=arguments[o];e(...r).catch(e=>t((0,n.SC)(e)))};var s=i(968026);let l=(r=e=>{(0,s.captureError)(e)},(e,t)=>o(e,t??r))},542071:function(e){e.exports={root:"card_root__as1nN",card:"card_card__c5vp0",active:"card_active__LjRsw"}},586348:function(e){e.exports={frameworkIconGroup:"framework-icon-group_frameworkIconGroup__jFOoA",numProjects:"framework-icon-group_numProjects__tbQ_3"}},440077:function(e){e.exports={suggestionBox:"select-git-repository_suggestionBox__ZYvhx",small:"select-git-repository_small__0XjHB",suggestionList:"select-git-repository_suggestionList__rrRVA",suggestionListBorder:"select-git-repository_suggestionListBorder__u2zcX",suggestionDescription:"select-git-repository_suggestionDescription__a6sm7",suggestionHighlight:"select-git-repository_suggestionHighlight__vPCxP",repoTitle:"select-git-repository_repoTitle__KoXpg",repoDescription:"select-git-repository_repoDescription__b5hgV",selectProvider:"select-git-repository_selectProvider__Y4WDL",gitPill:"select-git-repository_gitPill__wIfuG",continueWithText:"select-git-repository_continueWithText__ELbNP",providerBtnMobile:"select-git-repository_providerBtnMobile__VUQ2V",emptyResult:"select-git-repository_emptyResult__JDeIs",loadingResult:"select-git-repository_loadingResult__iofun",repoList:"select-git-repository_repoList__RE5d6",providerBtn:"select-git-repository_providerBtn__GjP3h",entityStack:"select-git-repository_entityStack__K3dgS",entityName:"select-git-repository_entityName__SdLF5"}}}]);