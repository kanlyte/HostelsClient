(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[15169],{383575:function(e,n,r){"use strict";r.d(n,{Q:function(){return c}});var i=r(4799),t=r(312253),l=r(14517),s=r(437089),o=r.n(s);let c=(0,t.forwardRef)(function(e,n){let{onAction:r,Icon:s,size:c,className:a}=e,d=(0,t.useCallback)(e=>{"Enter"===e.key&&r()},[r]);return(0,i.jsx)("div",{className:o().iconWrapper,onClick:r,onKeyUp:d,ref:n,role:"button",tabIndex:0,children:(0,i.jsx)(s,{className:(0,l.W)(o().icon,a),size:c})})})},515695:function(e,n,r){"use strict";r.d(n,{G:function(){return C},n:function(){return w}});var i=r(4799),t=r(312253),l=r(906076),s=r(358089),o=r(687684),c=r(13452),a=r(55910),d=r(560677),u=r(61964),h=r(655016),x=r(348066),j=r(170617),p=r(464801),v=r(820816),f=r(530472),m=r(20135),g=r(239918),b=r(150966);function y(e){var n,r;let{isLoading:t,advancedOptions:s,onChangeAdvancedOptions:o}=e;return(0,i.jsxs)(l.K,{gap:6,children:[(0,i.jsx)(g.Q,{environments:s.environments,error:null===(n=s.error)||void 0===n?void 0:n.environments,onChange:e=>o({...s,environments:e,error:{...s.error,environments:void 0}})}),(0,i.jsx)(b.j,{isExpandedDefault:!!s.error,children:(0,i.jsxs)(l.K,{gap:3,children:[(0,i.jsx)(m.I,{"aria-label":"Environment Variables Prefix",disabled:t,error:null===(r=s.error)||void 0===r?void 0:r.envPrefix,label:"Environment Variables Prefix",onChange:e=>o({...s,envPrefix:e.currentTarget.value,error:{...s.error,envPrefix:void 0}}),placeholder:v.K$,suffix:"_URL",value:s.envPrefix,width:"100%"}),(0,i.jsx)(f.x,{color:"accents-5",children:"This prefix will be applied to the environment variables that are automatically created for the project."})]})})]})}function w(e){let{project:n,redisId:r,title:o,subtitle:p,onClickOutside:f,onConnectionCreated:m,ProjectSelector:g}=e,{mutate:b}=(0,d.i)(),{connectProjects:w}=(0,h.EH)(),[C,S]=(0,t.useState)({envPrefix:v.K$,environments:{[x.r.Development]:!0,[x.r.Preview]:!0,[x.r.Production]:!0},error:null}),[K,k]=(0,t.useState)(!1),[P,_]=(0,t.useState)(null),T=(0,j.Z)(n);(0,t.useEffect)(()=>{null!==C.error&&(!n||T&&n.id!==T.id)&&S({...C,error:null})},[C,T,n]);let A=(0,t.useCallback)(async e=>{e.preventDefault();try{let e=[x.r.Production,x.r.Preview,x.r.Development].filter(e=>C.environments[e]);if(k(!0),_(null),S({...C,error:null}),0===e.length){S({...C,error:{environments:"Select at least one Environment for your Environment Variable"}}),k(!1);return}await w({projectId:(null==n?void 0:n.id)??"",envVarPrefix:C.envPrefix,envVarEnvironments:e,redisId:r}),u.Vy.success(`Connected Project ${(null==n?void 0:n.name)??""} to ${v.L9}`),await b(),m&&await m(),f()}catch(e){if(e instanceof Error){let n="project_env_var_not_unique"===e.code;n?S({...C,error:{envPrefix:e.message}}):_(e.message)}else throw e}finally{k(!1)}},[C,w,null==n?void 0:n.id,null==n?void 0:n.name,r,b,m,f]);return(0,i.jsxs)("form",{onSubmit:(0,a._)(A),children:[(0,i.jsx)(s.Body,{children:(0,i.jsxs)(l.K,{gap:6,children:[(0,i.jsx)(s.Title,{children:o}),p?(0,i.jsx)(s.Subtitle,{children:p}):null,(0,i.jsx)(s.Inset,{last:!0,children:(0,i.jsxs)(l.K,{gap:6,children:[g,(0,i.jsx)(y,{advancedOptions:C,isLoading:K,onChangeAdvancedOptions:S}),P?(0,i.jsx)(c.Z,{children:P}):null]})})]})}),(0,i.jsxs)(s.Actions,{children:[(0,i.jsx)(s.Action,{onClick:f,type:"secondary",children:"Cancel"}),(0,i.jsx)(s.Action,{buttonType:"submit",disabled:!n,loading:K,children:"Connect"})]})]})}function C(e){let{active:n,redis:r,onClickOutside:l,onAnimationDone:c}=e,[a,d]=(0,t.useState)(null),{team:u,user:h}=(0,o.Z)(),x=u?u.slug:null==h?void 0:h.username;return(0,i.jsx)(s.Modal,{active:n,allowOverflow:!0,onAnimationDone:c,onClickOutside:l,width:540,children:(0,i.jsx)(w,{ProjectSelector:(0,i.jsx)(p.l,{account:x,allowSelectConnectedProjects:!1,connectedProjectIds:(null==r?void 0:r.projectsMetadata.map(e=>e.projectId))??[],onProjectSelected:e=>{d(e)},selectedProject:a}),onClickOutside:l,project:a,redisId:(null==r?void 0:r.id)??"",title:"Connect Project"})})}},290393:function(e,n,r){"use strict";r.d(n,{i:function(){return C}});var i=r(4799),t=r(312253),l=(r(395314),r(906076)),s=r(530472),o=r(20135),c=r(358089),a=(r(838262),r(852625)),d=(r(687684),r(655016)),u=r(55910),h=r(13452),x=(r(659978),r(61964)),j=r(120885),p=r(560677),v=r(231655),f=r(937216),m=r(150966),g=r(820816),b=r(323801),y=r(138681),w=r.n(y);function C(e){let{active:n,createLabel:r="Create",onBack:a,onRedisCreate:y,projectName:C}=e,{createRedis:S}=(0,d.EH)(),{isNameTaken:K}=(0,p.i)(),[k,P]=(0,f.t)({projectName:C,storeType:"redis"}),[_,T]=(0,t.useState)(d.tW[0].value),[A,E]=(0,t.useState)([]),[R,L]=(0,t.useState)(!1),[Z,I]=(0,t.useState)(!1),[D,O]=(0,t.useState)(null),V=(0,t.useCallback)(async e=>{if(e.preventDefault(),K(k)){O("This name is already in use by another store");return}O(null),I(!0);try{let e=await S({name:k,eviction:R,primaryRegion:_??d.tW[0].value,readRegions:A.map(e=>e.value)});await y(e.store),x.Vy.success(`Created ${g.L9} store successfully`)}catch(e){e instanceof Error?O(e.message):O(`An error occurred while creating the ${g.L9} store`)}finally{I(!1)}},[S,R,K,k,y,_,A]),W=(0,t.useRef)(null);return(0,t.useEffect)(()=>{setTimeout(()=>{if(n){var e,r;null===(e=W.current)||void 0===e||e.focus(),null===(r=W.current)||void 0===r||r.select()}},0)},[n]),(0,i.jsxs)("form",{onSubmit:(0,u._)(V),children:[(0,i.jsx)(c.Body,{children:(0,i.jsxs)(l.K,{gap:6,children:[(0,i.jsxs)(l.K,{gap:2,children:[(0,i.jsxs)(c.Title,{center:!0,children:["Create ",g.L9," Store"]}),(0,i.jsx)(c.Subtitle,{children:(0,i.jsxs)(l.K,{direction:"row",gap:0,justify:"center",children:[(0,i.jsxs)(s.x,{children:["Set up this new ",g.L9," Store"]}),(0,i.jsx)(s.x,{color:"accents-5",children:", powered by Upstash"})]})})]}),(0,i.jsx)(c.Inset,{last:!0,children:(0,i.jsxs)(l.K,{gap:6,children:[(0,i.jsxs)(l.K,{gap:5,children:[(0,i.jsx)(o.I,{"aria-label":"Store Name",disabled:Z||!1,label:"Store Name",maxLength:f.$,onChange:e=>P(e.currentTarget.value),placeholder:"store-name",ref:W,value:k,width:"100%"}),(0,i.jsxs)(l.K,{gap:2,children:[(0,i.jsx)(s.x,{color:"accents-5",lineHeight:12,size:13,weight:500,children:"Primary region"}),(0,i.jsxs)(v.Z,{clearable:!1,onChange:e=>{e&&!A.some(n=>n.value===e)&&T(e)},placeholder:"Choose region",value:_,children:[(0,i.jsx)(v.Z.Input,{}),(0,i.jsx)(v.Z.List,{children:d.tW.map(e=>(0,i.jsx)(v.Z.Option,{disabled:A.some(n=>n.value===e.value),value:e.value,children:e.label},e.value))})]}),(0,i.jsx)(s.x,{color:"accents-5",lineHeight:12,size:13,children:"This is the region where your writes will take place."})]}),(0,i.jsx)(m.j,{children:(0,i.jsxs)(l.K,{gap:5,children:[(0,i.jsxs)(l.K,{gap:2,children:[(0,i.jsx)(s.x,{color:"accents-5",lineHeight:12,size:13,weight:500,children:"Read regions"}),(0,i.jsx)(b.a,{onReadRegionsChange:E,primaryRegion:_,readRegions:A}),(0,i.jsx)(s.x,{color:"accents-5",lineHeight:12,size:13,children:"These are the regions where most of your reads will take place."})]}),(0,i.jsxs)(l.K,{gap:2,children:[(0,i.jsx)(l.K,{align:"center",direction:"row",gap:2,children:(0,i.jsx)(j.Z,{checked:R,className:w().eviction,id:"eviction",onChange:()=>L(!R),children:"Use eviction"})}),(0,i.jsx)(s.x,{color:"accents-5",size:12,children:"Eviction will remove keys when your database reaches the maximum size"})]})]})})]}),null]})}),D?(0,i.jsx)(h.Z,{children:D}):null]})}),(0,i.jsxs)(c.Actions,{children:[(0,i.jsx)(c.Action,{onClick:a,type:"secondary",children:"Go Back"}),(0,i.jsx)(c.Action,{buttonType:"submit",disabled:""===k.trim(),loading:Z,children:r})]})]})}},323801:function(e,n,r){"use strict";r.d(n,{a:function(){return x}});var i=r(4799),t=r(312253),l=r(914319),s=r(906076),o=r(530472),c=r(655016),a=r(383575),d=r(231655),u=r(39889),h=r.n(u);function x(e){let{primaryRegion:n,readRegions:r,onReadRegionsChange:u}=e,x=(0,t.useMemo)(()=>{let e=new Set(r.map(e=>e.value));return n&&e.add(n),c.tW.filter(n=>!e.has(n.value))},[n,r]),j=(0,t.useRef)([]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(d.Z,{onChange:e=>{e&&u([...r,{value:e,label:c.j7[e]}])},placeholder:"Choose regions...",value:null,children:[(0,i.jsx)(d.Z.Input,{}),(0,i.jsx)(d.Z.List,{children:x.map(e=>(0,i.jsx)(d.Z.Option,{value:e.value,children:e.label},e.value))})]}),(0,i.jsx)(s.K,{children:r.map((e,n)=>(0,i.jsxs)(s.K,{className:h().selectedRegions,direction:"row",justify:"space-between",children:[(0,i.jsx)(o.x,{color:"accents-7",children:e.label}),(0,i.jsx)(a.Q,{Icon:l.S,onAction:()=>{var i;u(r.filter(n=>n.value!==e.value)),null===(i=j.current[n-1]??j.current[n+1])||void 0===i||i.focus()},ref:e=>{j.current[n]=e},size:16})]},e.value))})]})}},894988:function(e,n,r){"use strict";r.d(n,{Z:function(){return u}});var i=r(4799);r(312253);var t=r(906076),l=r(530472),s=r(358089),o=r(838262),c=r(628497),a=r(923475),d=r(820816);function u(e){var n;let{onContinue:r,onBack:u}=e,{hasRedisEnterprise:h}=(0,a.W0)(),{team:x,isReady:j}=(0,c.t7)();return j?(null==x?void 0:null===(n=x.billing)||void 0===n?void 0:n.plan)!=="enterprise"||h?(0,i.jsxs)("form",{onSubmit:r,children:[(0,i.jsx)(s.Body,{children:(0,i.jsxs)(t.K,{gap:6,children:[(0,i.jsxs)(t.K,{gap:2,children:[(0,i.jsx)(s.Title,{center:!0,children:"Data Acknowledgement"}),(0,i.jsx)(s.Subtitle,{children:(0,i.jsx)(l.x,{align:"center",color:"accents-7",children:"Please acknowledge the following notice before proceeding."})})]}),(0,i.jsxs)(t.K,{gap:4,children:[(0,i.jsxs)(l.x,{color:"accents-7",children:["During the Vercel ",d.L9," beta phase, this product should not be considered SOC 2 Type 2 compliant. If this compliance is required by your organization and project, please do not proceed."]}),(0,i.jsx)("div",{children:(0,i.jsx)(o.r,{external:!0,href:"https://vercel.com/docs",variant:"highlight",children:"Learn more"})})]})]})}),(0,i.jsxs)(s.Actions,{children:[(0,i.jsx)(s.Action,{onClick:u,type:"secondary",children:"Go Back"}),(0,i.jsx)(s.Action,{buttonType:"submit",onClick:r,children:"Proceed"})]})]}):(0,i.jsxs)("form",{onSubmit:r,children:[(0,i.jsx)(s.Body,{children:(0,i.jsxs)(t.K,{gap:6,children:[(0,i.jsx)(t.K,{gap:2,children:(0,i.jsxs)(s.Title,{center:!0,children:["This data product is not compliant with SOC 2 Type 2"," "]})}),(0,i.jsxs)(t.K,{gap:6,children:[(0,i.jsxs)(l.x,{children:["During the Vercel ",d.L9," beta phase, this product is not compliant with SOC 2 Type 2. As you are a member of an Enterprise team, your team administrator must first contact Vercel Support and agree that these products can be used for projects within this team."]}),(0,i.jsx)("div",{children:(0,i.jsx)(o.r,{external:!0,href:"https://vercel.com/docs",variant:"highlight",children:"Learn more"})})]})]})}),(0,i.jsx)(s.Actions,{children:(0,i.jsx)(s.Action,{fullWidth:!0,onClick:u,type:"secondary",children:"Go Back"})})]}):null}},437089:function(e){e.exports={icon:"icon-action_icon__DiJg6",iconWrapper:"icon-action_iconWrapper__sPjXx"}},138681:function(e){e.exports={eviction:"redis-modal-create_eviction__GfbAd"}},39889:function(e){e.exports={selectedRegions:"redis-regions-multi-select_selectedRegions__CKRbf"}}}]);