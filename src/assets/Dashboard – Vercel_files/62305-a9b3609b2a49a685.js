"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[62305],{490720:function(e){/*!
 * escape-html
 * Copyright(c) 2012-2013 TJ Holowaychuk
 * Copyright(c) 2015 Andreas Lubbe
 * Copyright(c) 2015 Tiancheng "Timothy" Gu
 * MIT Licensed
 */var t=/["'&<>]/;e.exports=function(e){var a,r=""+e,n=t.exec(r);if(!n)return r;var i="",u=0,l=0;for(u=n.index;u<r.length;u++){switch(r.charCodeAt(u)){case 34:a="&quot;";break;case 38:a="&amp;";break;case 39:a="&#39;";break;case 60:a="&lt;";break;case 62:a="&gt;";break;default:continue}l!==u&&(i+=r.substring(l,u)),l=u+1,i+=a}return l!==u?i+r.substring(l,u):i}},743974:function(e,t,a){a.d(t,{B:function(){return M}});var r=a(312253),n=a(490720),i=a.n(n),u=a(917165),l=a(690601),o=a.n(l),s=a(18436),c=a.n(s),f=a(167160),m=a(234048),d=a(348631),v=a(843987),y=a(5500),p=a(424858),h=a(780604),g=a(139378),S=a(52954),R=a(170617);let E={name:void 0,companyURL:void 0,companySize:void 0};var b=a(560630),w=a(315573);function C(e){let t=(0,r.useRef)(null),a=(0,b.useRouter)(),{onBlur:n,initialValue:i="",validate:u}=e,[l,o]=(0,r.useState)(i),[s,c]=(0,r.useState)(!1),[f,m]=(0,r.useState)(!1),[d,v]=(0,r.useState)(!1);(0,r.useEffect)(()=>{if(!a.isReady||d||!e.queryParam||i)return;let t=(0,w.P)(a.query[e.queryParam]);!l&&t&&t!==l&&(o(t),v(!0))},[a.isReady,a.query,l,d,e.queryParam,i]);let y=(0,r.useCallback)(e=>{o(e.target.value)},[]),p=(0,r.useCallback)(()=>{"function"==typeof n&&n(l),m(!0)},[l,n]),h=(0,r.useCallback)(e=>{c(e)},[]),g=(0,r.useCallback)(()=>{o(i),m(!1),c(!1)},[i]),S=(0,r.useCallback)(async()=>{if(c(!1),"function"==typeof u){let e=await u(l);return e&&c(!0),e}return Promise.resolve(!0)},[l,u]),R=(0,r.useCallback)(()=>{var e;null===(e=t.current)||void 0===e||e.focus()},[]);return{ref:t,name:e.name,value:l,error:s,touched:f,onChange:y,onBlur:p,onError:h,setValue:o,reset:g,validate:S,focus:R}}async function T(e){let t=await Promise.all(e.map(e=>e.validate())),a=0;for(;a<t.length-1&&!t[a];)a++;t[a]&&setTimeout(()=>e[a].focus());let r=t.filter(e=>e);return 0===r.length}let k=(e,t)=>{switch(t.type){case"FORM_SUBMIT":return{...e,status:"loading",formError:null};case"SUBMIT_SUCCESS":return{...e,status:"success",formError:null};case"SUBMIT_ERROR":{let a={...e,status:"error"};return"string"==typeof t.message?a.formError=t.message:a.formError=null,a}case"RESET_FORM_ERROR":return{...e,formError:null};default:throw Error("Invalid action type")}};function M(e){var t,a;let{onSubmitError:n,onSubmitSuccess:l,campaignId:s,type:b="",initialValues:w,dynamicForm:M}=e,{data:_}=(0,m.a)(),O=(0,u.Z)(),[U,P]=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{status:"ready",formError:null},[t,a]=(0,r.useReducer)(k,e),n="loading"===t.status,i="success"===t.status,u="error"===t.status;return[{...t,loading:n,success:i,error:u},a]}(),{status:B,loading:q,success:I,error:x,formError:K}=U,{actions:F,...L}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{initialValues:t={}}=e,a=C({name:"name",initialValue:t.name??"",validate:e=>0===e.trim().length,queryParam:"full-name"}),n=C({name:"email",initialValue:t.email??"",validate:e=>0===e.trim().length||!o()(e),queryParam:"email"}),i=C({name:"companyURL",initialValue:t.companyURL??"",validate:e=>0===e.trim().length||!c()(e,{require_protocol:!1}),queryParam:"website"}),u=C({name:"companySize",initialValue:t.companySize??"",validate:e=>0===e.trim().length}),l=C({name:"note",validate:e=>0===e.trim().length,queryParam:"content"}),s=(0,r.useCallback)(()=>{n.reset(),a.reset(),i.reset(),u.reset(),l.reset()},[n,a,i,u,l]);return{nameInput:a,emailInput:n,companyURLInput:i,companySizeInput:u,noteInput:l,actions:{resetInputs:s}}}({initialValues:w}),{nameInput:N,emailInput:z,companyURLInput:V,companySizeInput:A,noteInput:$}=L,{resetInputs:j}=F,H=(0,r.useMemo)(()=>{var e;return z.value||(null==_?void 0:null===(e=_.user)||void 0===e?void 0:e.email)||""},[z.value,null==_?void 0:null===(t=_.user)||void 0===t?void 0:t.email]),X=(0,r.useMemo)(()=>{var e;return H&&H===(null==_?void 0:null===(e=_.user)||void 0===e?void 0:e.email)},[null==_?void 0:null===(a=_.user)||void 0===a?void 0:a.email,H]),Z=(0,f.c)(z.value,250),D=(0,f.c)($.value,500),G=()=>{P({type:"RESET_FORM_ERROR"}),N.onError(!1),V.onError(!1),A.onError(!1)},{showName:J,showCompanyURL:Q,showCompanySize:W,submitEnabled:Y,clearbitData:ee}=function(e){let{enabled:t,email:a,setEmailErr:n,user:i,hasNoteInputValue:u,resetFormErrors:l}=e,[s,c]=(0,r.useState)(!1),[f,m]=(0,r.useState)(!1),[d,y]=(0,r.useState)(null),p=(0,R.Z)(a),h=(0,r.useCallback)(e=>{if(e){if((0,g.isNumber)(e)){if(e<100)return"1-100";if(e<500)return"100-500";if(e<1e3)return"500-1000";if(e>=1e3)return"1000+"}switch(e){case"1-10":case"11-50":return"1-100";case"51-250":case"251-1K":default:return;case"1K-5K":case"5K-10K":case"50K-100K":case"100K+":return"1000+"}}},[]),b=(0,r.useCallback)(()=>(0,S.I)(`${v.W5}?email=${a}`,{method:"GET",throwOnHTTPError:!0}).then(e=>{var t,a,r,n,i,u,l;y({name:null===(t=e.person)||void 0===t?void 0:null===(a=t.name)||void 0===a?void 0:a.fullName,companyURL:null===(r=e.company)||void 0===r?void 0:r.domain,companySize:h((null===(n=e.company)||void 0===n?void 0:null===(i=n.metrics)||void 0===i?void 0:i.employees)??(null===(u=e.company)||void 0===u?void 0:null===(l=u.metrics)||void 0===l?void 0:l.employeesRange))})}).catch(()=>{y(E)}).finally(()=>{m(!0),c(!0)}),[a,h]);(0,r.useEffect)(()=>{if(t){if(!a){if(u){y(E),m(!0),l();return}y(null),c(!1),m(!1),l();return}if(!o()(a)){s?(y(null),c(!1)):n(!0);return}s&&a===p||(n(!1),m(!1),c(!1),l(),b().catch(e=>{}))}},[a,b,s,t,n,i,u]);let w=!t||!!(d&&!d.name),C=!t||!!(d&&!d.companyURL),T=!t||!!(d&&!d.companySize);return{showName:w,showCompanyURL:C,showCompanySize:T,submitEnabled:f,clearbitData:d}}({enabled:!!M,email:Z,setEmailErr:z.onError,user:null==_?void 0:_.user,hasNoteInputValue:!!D,resetFormErrors:G}),et=(0,r.useMemo)(()=>{if(M){let e=[$,...J?[N]:[],...Q?[V]:[],...W?[A]:[],...X?[]:[z]];return e}return X?[N,V,A,$]:[N,V,A,$,z]},[A,V,M,z,N,$,W,Q,J,X]),ea=(0,r.useCallback)(async()=>!!await T(et)||(P({type:"SUBMIT_ERROR",message:O.formatMessage({defaultMessage:"Form submission failed because of invalid fields. Please address the errors and try again.",id:"Vm/qBO"})}),!1),[et,P,O]),er=(0,r.useCallback)(()=>{P({type:"SUBMIT_SUCCESS"}),d.co.track(d.s6.CONTACT_SALES,{email:H}),"function"==typeof l&&l(),j()},[P,H,l,j]),en=(0,r.useCallback)(e=>{if("function"==typeof n&&n(e),(0,p.B)(e)&&"bad_email"===e.code){z.onError(!0),setTimeout(()=>z.focus()),P({type:"SUBMIT_ERROR",message:O.formatMessage({defaultMessage:"Submitting this form failed because the email address you entered is invalid. Please try again.",id:"GT0kaX"})});return}P({type:"SUBMIT_ERROR"})},[P,z,O,n]),ei=(0,r.useCallback)(async e=>{if(e.preventDefault(),!q){P({type:"FORM_SUBMIT"});try{if(!await ea())return;let e={url:"localhost"===window.location.hostname?`https://${y.pV}/dev-mode${window.location.pathname}`:window.location.toString(),email:H,name:(null==ee?void 0:ee.name)||i()(N.value),companySize:(null==ee?void 0:ee.companySize)||A.value,companyURL:(null==ee?void 0:ee.companyURL)||V.value,note:i()($.value),label:"front",ua:`front production + ${navigator.userAgent} (${navigator.language||"unknown language"})`,type:b,campaign_id:s};if(!X)try{if(!await (0,h.oH)({email:e.email,name:e.name})){z.onError(!0),P({type:"SUBMIT_ERROR",message:O.formatMessage({defaultMessage:"Form submission failed because the email address you entered is invalid.",id:"nQ97wg"})});return}}catch{}let t=await fetch(v.wZ,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify(e)});await (0,p.X)(t),er()}catch(e){en(e)}}},[q,P,ea,H,ee,N.value,A.value,V.value,$.value,b,s,X,er,z,O,en]);return{fields:{nameInput:N,emailInput:z,companyURLInput:V,companySizeInput:A,noteInput:$},status:B,loading:q,success:I,error:x,formError:K,dispatch:P,resetInputs:j,submitForm:ei,submitEnabled:Y,showName:J,showCompanyURL:Q,showCompanySize:W,debouncedEmailValue:Z,dynamicForm:M}}},780604:function(e,t,a){a.d(t,{oH:function(){return r}});async function r(e){let{email:t,firstName:a,lastName:r,name:n}=e,i=await fetch("/api/validate-email",{method:"POST",body:JSON.stringify({email:t,firstName:a,lastName:r,name:n})});if(!i.ok||200!==i.status)throw Error("Failed to validate email");let u=await i.json(),l=u.email.valid;return l}},424858:function(e,t,a){a.d(t,{B:function(){return u},X:function(){return l}});var r=a(151854),n=a(939373),i=a(213025);let u=e=>(0,n.x)(e)&&"code"in e;async function l(e){if(e.status>=200&&e.status<300)return e;let{type:t}=(0,i.Q)(e.headers.get("Content-Type")||"text/plain");if("application/json"===t){let t=await e.json();if("error"in t&&u(t.error))throw(0,r.SC)(t.error);if(u(t))throw(0,r.SC)(t)}if("text/plain"===t){let t=await e.text();throw(0,r.SC)(t)}throw Error(e.statusText)}},55910:function(e,t,a){a.d(t,{_:function(){return l}});var r,n=a(151854);let i=(e,t)=>function(){for(var a=arguments.length,r=Array(a),i=0;i<a;i++)r[i]=arguments[i];e(...r).catch(e=>t((0,n.SC)(e)))};var u=a(968026);let l=(r=e=>{(0,u.captureError)(e)},(e,t)=>i(e,t??r))},254300:function(e,t,a){a.d(t,{F:function(){return i}});var r=a(312253),n=a(294311);function i(){let e=(0,r.useRef)(null),t=t=>{if((0,n.x)(t)&&"Enter"===t.key){var a;null===(a=e.current)||void 0===a||a.requestSubmit()}};return{formRef:e,onKeyDown:t}}},167160:function(e,t,a){a.d(t,{c:function(){return i},y:function(){return n}});var r=a(312253);function n(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=(0,r.useRef)(null),n=()=>{a.current&&clearTimeout(a.current)};return(0,r.useEffect)(()=>()=>n(),[]),function(){for(var r=arguments.length,i=Array(r),u=0;u<r;u++)i[u]=arguments[u];n(),a.current=setTimeout(()=>{e(...i)},t)}}function i(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,[a,n]=(0,r.useState)(e);return(0,r.useEffect)(()=>{let a=setTimeout(()=>n(e),t);return()=>clearTimeout(a)},[e,t]),a}}}]);