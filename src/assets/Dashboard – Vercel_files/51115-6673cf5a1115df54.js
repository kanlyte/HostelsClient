"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[51115],{579365:function(e,t,n){n.d(t,{Cg:function(){return m},e_:function(){return h},h$:function(){return b},iK:function(){return v}});var i=n(581945),o=n(52954),a=n(694620),r=n(57428),u=n(732796),s=n(843987),c=n(515448),l=n(61964),d=n(628497);let g={bandwidth:["bandwidth_outgoing_bytes","bandwidth_incoming_bytes"],requests:["request_hit_count","request_miss_count"],invocations:["function_invocation_successful_count","function_invocation_error_count","function_invocation_timeout_count"],edgeFunctionExecutionUnits:["edge_function_execution_units"],execution:["function_execution_successful_gb_hours","function_execution_error_gb_hours","function_execution_timeout_gb_hours"],workerInvocations:["worker_invocation_count"],throttles:["function_invocation_throttle_count"],buildTime:["build_build_seconds","build_queued_seconds"],buildNumber:["build_completed_count","build_failed_count"],images:["images_sources_count"],artifactsTaskDuration:["artifacts_downloaded_task_duration_ms","artifacts_local_cache_hit_task_duration_ms"],artifactsSize:["artifacts_downloaded_size_bytes","artifacts_uploaded_size_bytes"],artifactsCount:["artifacts_downloaded_count","artifacts_uploaded_count"],monitoring:["monitoring_metric_count"],edgeConfigReads:["edge_config_reads"],edgeConfigWrites:["edge_config_writes"]},f={workerExecutionAvg:["worker_execution_time_avg"]},_={bandwidth:"bandwidth",requests:"requests",invocations:"function_invocations",execution:"function_execution",throttles:"function_throttle_count",workerExecutionAvg:"worker_execution_time_avg",workerInvocations:"worker_invocations",buildTime:"build_time",buildNumber:"build_count",images:"image_sources",artifactsSize:"artifacts_size_breakdown",artifactsCount:"artifacts_count_breakdown",artifactsTaskDuration:"artifacts_time_breakdown",monitoring:"monitoring",edgeConfigReads:"edge_config_reads",edgeConfigWrites:"edge_config_writes"};function m(e){let{projectId:t,start:n,end:r}=e,{isReady:u,team:c}=(0,d.t7)();return(0,i.ZP)(()=>u&&n&&r&&void 0!==t?`${s.MG}${(0,a.c)({teamId:null==c?void 0:c.id,projectId:t,from:"object"==typeof n?n.toISOString():new Date(n).toISOString(),to:"object"==typeof r?r.toISOString():new Date(r).toISOString()})}`:null,async e=>{let t=await (0,o.I)(e,{throwOnHTTPError:!0});return function(e){let{data:t,from:n,to:i}=e,o=t.analytics.data,a={analytics:Date.now()},r=[];for(let e=0;e<o.length;e++){let t=o[e];r.push({date:new Date(t.date).getTime(),sum:t.report_count,0:t.report_count,1:0,2:0})}let u={from:new Date(n),to:new Date(i),granularity:t.analytics.granularity,analytics:r,change:{},lastUpdate:a,started:{analytics:"2021-01-01T00:00:00.000Z"},insight:{analytics:[]}};return u}({from:n,to:r,data:t})},{revalidateOnFocus:!1,revalidateOnReconnect:!1,refreshInterval:0})}let w=e=>({revalidateOnFocus:!1,revalidateOnReconnect:!1,refreshInterval:0,onError:(t,n)=>{let i=t.statusCode||t.status,o=404!==i&&403!==i&&"cancelled"!==t.message&&!(0,c.I)()&&"pending"!==t.message;o&&(console.table(t),(0,r.Op)(n,e),console.error(t))},onSuccess:(t,n)=>{(0,r.M9)(n,e)},onErrorRetry:(e,t,n,i,o)=>{let{retryCount:a}=o;if("pending"===e.message)return setTimeout(i,3e3);(0,u.h)(e,t,n,i,{retryCount:a})}});function v(e){let{type:t,projectId:n=null,functionName:r=null,edgeConfigId:u=null,edgeInvocationType:c=null,sourceName:m=null,skip:v=!1,granularity:b,start:h,end:p}=e,{isReady:T,team:y}=(0,d.t7)(),k=(0,l.e1)();return(0,i.ZP)(()=>T&&h&&p&&!v&&void 0!==n&&void 0!==r?`${s.Pm}${(0,a.c)({type:t,teamId:null==y?void 0:y.id,projectId:n,edgeConfigId:u,functionName:r,edgeInvocationType:c,sourceName:m,granularity:b,from:"object"==typeof h?h.toISOString():new Date(h).toISOString(),to:"object"==typeof p?p.toISOString():new Date(p).toISOString()})}`:null,async e=>{let n=await (0,o.I)(e,{throwOnHTTPError:!0});return function(e){var t,n,i,o,a;let{data:r,from:u,to:s,team:c,queryContext:l}=e;if("pending"in r)throw Error("pending");let d=[];if(r.data.length)for(let e=0;e<r.data.length;e++)d.push(r.data[e]);let m={workerExecutionAvg:"2022-05-24T00:00:00.000Z"},w={bandwidth:"2021-01-26T00:00:09.000Z",requests:"2021-01-26T00:00:09.000Z",invocations:"2021-02-16T00:00:00.000Z",edgeFunctionExecutionUnits:"2021-02-16T00:00:00.000Z",execution:"2021-02-16T00:00:00.000Z",workerInvocations:"2021-10-22T00:00:00.000Z",throttles:"2021-02-16T00:00:00.000Z",buildTime:"2021-02-19T00:00:00.000Z",buildNumber:"2021-02-19T00:00:00.000Z",images:"2021-07-01T00:00:00.000Z",artifactsTaskDuration:"2021-12-14T00:00:00.000Z",artifactsSize:"2021-12-14T00:00:00.000Z",artifactsCount:"2021-12-14T00:00:00.000Z",monitoring:"2023-03-06T00:00:00.000Z",edgeConfigReads:"2023-03-14T00:00:00.000Z",edgeConfigWrites:"2023-03-14T00:00:00.000Z",...m},v={edge:new Date(r.lastUpdate).getTime(),builds:new Date(r.lastUpdate).getTime(),images:new Date(r.lastUpdate).getTime(),artifacts:new Date(r.lastUpdate).getTime(),monitoring:new Date(r.lastUpdate).getTime(),edgeConfigReads:new Date(r.lastUpdate).getTime(),edgeConfigWrites:new Date(r.lastUpdate).getTime()},b={bandwidth:[],requests:[],invocations:[],edgeFunctionExecutionUnits:[],execution:[],workerInvocations:[],workerExecutionAvg:[],throttles:[],buildTime:[],buildNumber:[],images:[],artifactsTaskDuration:[],artifactsSize:[],artifactsCount:[],monitoring:[],edgeConfigReads:[],edgeConfigWrites:[]},h={bandwidth:[],requests:[],invocations:[],edgeFunctionExecutionUnits:[],execution:[],workerInvocations:[],throttles:[],buildTime:[],buildNumber:[],images:[],artifactsSize:[],artifactsTaskDuration:[],artifactsCount:[],monitoring:[],edgeConfigReads:[],edgeConfigWrites:[]},p={workerExecutionAvg:[]},T={},y={};for(let e=0;e<d.length;e++){let t=d[e];for(let e in g){let n=e,i=new Date(t.first_event).getTime(),o={date:new Date(t.date).getTime(),sum:0,0:0,1:0,2:0};if((i||o.date)<Date.parse(w[n]))continue;let a=0;for(let e=0;e<g[n].length;e++){let i=e;o[i]=t[g[n][e]]||0,o.sum+=o[i],t.previous&&(a+=o[i],a-=t.previous[g[n][e]]??0),y[n]=y[n]??{},y[n][e]=(y[n][e]??0)+o[i]}h[n].push(o),T[n]=(T[n]||0)+a}for(let e in f){let n=e,i={date:new Date(t.date).getTime(),0:[0,0],1:[0,0],2:[0,0]};for(let e=0;e<f[n].length;e++){let o=i.date>=Date.parse(m[n]);i[e]=(o?t[f[n][e]]:void 0)||[0,0]}p[n].push(i)}}let k="number"==typeof u?u:u.getTime(),D="number"==typeof s?s:s.getTime(),I=k-(D-k);for(let e in g){let t=e;new Date(w[t]).getTime()>I&&delete T[t]}if(c&&(null===(t=y.buildTime)||void 0===t?void 0:t[1])&&Math.round(y.buildTime[1]/3600)>=1&&b.buildTime.push({type:"tooManySecondsQueued",secondsQueued:y.buildTime[1],teamSlug:c.slug,warning:!0}),(null===(n=y.invocations)||void 0===n?void 0:n[1])&&y.invocations[1]>=1&&b.invocations.push({type:"tooManyInvocationErrors",errorCount:y.invocations[1],warning:!0}),(null===(i=y.execution)||void 0===i?void 0:i[1])&&y.execution[1]>=.01&&b.execution.push({type:"tooManyExecutionErrors",errorTime:y.execution[1],warning:!0}),(null===(o=y.images)||void 0===o?void 0:o[0])?(!c||(null===(a=c.billing)||void 0===a?void 0:a.plan)==="hobby")&&y.images[0]>1e3&&b.images.push({type:"aboveImagesFairUseLimit",optimizedImages:y.images[0],warning:!0}):b.images.push({type:"noImageData",warning:!0}),!c&&"edge"===l.type&&"middleware"===l.edgeInvocationType){let e={sum:0,count:0};for(let t of p.workerExecutionAvg){let{date:n,breakdown:i,...o}=t;for(let[t,n]of Object.values(o))e.sum+=t,e.count+=n}e.sum/e.count>5e4&&b.workerExecutionAvg.push({type:"aboveEdgeMiddlewareCpuTimeFairUseLimit",warning:!0})}let x=Object.entries(_),S=Object.entries({...h,...p});x.forEach(e=>{let[t,n]=e;S.forEach(e=>{let[i,o]=e;if(i===t){let e=r.data.length-o.length;for(let t=0;t<r.data.slice(e).length;t++){let e=r.data[t].breakdown,i=e[n];e&&i&&(o[t].breakdown=i)}}})});let E={from:new Date(u),to:new Date(s),granularity:r.granularity,change:T,started:w,lastUpdate:v,insight:b,...h,...p};return E}({data:n,from:h,to:p,team:y,queryContext:{type:t,edgeInvocationType:c}})},w(k))}function b(e){let{type:t,skip:n=!1,start:r,end:u,edgeInvocationType:c}=e,{isReady:g,team:f}=(0,d.t7)(),_=(0,l.e1)();return(0,i.ZP)(()=>g&&r&&u&&!n?`${s.Pm}${(0,a.c)({type:t,edgeInvocationType:c,teamId:null==f?void 0:f.id,from:"object"==typeof r?r.toISOString():new Date(r).toISOString(),to:"object"==typeof u?u.toISOString():new Date(u).toISOString()})}`:null,async e=>{let t=await (0,o.I)(e);return function(e,t,n){let i={workerExecutionAvg:[]};for(let t of e.data){let e=new Date(t.date).getTime();i.workerExecutionAvg.push({date:e,data:t.worker_execution_time_avg})}return{from:new Date(t),to:new Date(n),granularity:e.granularity,lastUpdate:new Date(e.lastUpdate).getTime(),data:i}}(t,r,u)},w(_))}function h(e){let{isReady:t,team:n}=(0,d.t7)();return(0,i.ZP)(()=>!t||(null==e?void 0:e.skip)?null:`${s.Pm}${(0,a.c)({teamId:null==n?void 0:n.id,cycles:"1"})}`,e=>(0,o.I)(e,{throwOnHTTPError:!0}))}},168522:function(e,t,n){n.d(t,{s:function(){return o}});var i=n(872820);let o=(0,i.H1)('<path d="M15 18l-6-6 6-6"/>')}}]);